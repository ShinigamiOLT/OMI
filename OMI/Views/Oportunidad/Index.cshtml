@using System.Web.UI.WebControls
@model OMI.Models.cOportunidad

<div class="row">
    <div class="col-md-12">
        <div class="panel panel-border panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Sistema OIM - Ingenieria Aplicada OnePro</h3>
            </div>
            <div class="panel-body">

                @using (@Html.BeginForm("Index", "Oportunidad", FormMethod.Post))
                {
                    <div class="container">

                        <div class="row">

                            <div class="col-md-8">
                                <div class="menubar-logo" id="titulo">


                                    <span class="container">

                                        <h1> @Model.oportunidad.TbFormato.Descripcion</h1>
                                    </span>

                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="panel panel-default" id="panel_ovi">

                                    <div class="panel-body">
                                        <div class="input-group ">
                                            <span class="input-group-addon" id="sizing-addon4">Folio</span>
                                            <input type="text" class="form-control" name="Folio" placeholder="Username" aria-describedby="sizing-addon1" value="@Model.oportunidad.Folio" style="text-align: right; color: red" readonly="true">
                                        </div>

                                        <ul class="list-group">
                                            <li class="list-group-item"><h6>No. Formato: @Model.oportunidad.TbFormato.Nombre</h6></li>
                                            <li class="list-group-item"><h6>Revisión: @Model.oportunidad.TbFormato.Revision</h6></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--dasdasd div zxccxc-->





                    <div class="container">


                        <div class="row">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h2 class="panel-title">Contacto</h2>
                                </div>
                                <div class="panel-body ">

                                    <div class="input-group miinput">
                                     
                                            <span class="input-group-addon" id="sizing-addon1">Fecha:</span>
                                          
                                        @*     @Html.TextBoxFor(model => model.Fecha, new { htmlAttributes = new { @class = "form-control" } })
    @Html.ValidationMessageFor(model => model.Fecha, "", new { @class = "text-danger" })
                                                                                    <input type="date" class="form-control" name="@Model.Fecha" placeholder="Fecha" aria-describedby="sizing-addon1" value="@Model.Fecha" required>
                                        *@

                                        @Html.TextBoxFor(model => model.oportunidad.Fecha, new { @class = "form-control",style="display: row;"})

</div>

                                    <div class="input-group miinput">
                                        <span class="input-group-addon" id="sizing-addon2">Compania :</span>
                                        <input type="text" class="form-control" name= "@Html.NameFor(o=>o.oportunidad.Compania)" placeholder="Persona de contacto" aria-describedby="sizing-addon2" value="@Model.oportunidad.Compania" required>
                                    </div>


                                    <div class="input-group miinput">
                                        <span class="input-group-addon" id="sizing-addon3">Representante :</span>

                                        <input type="text" class="form-control" name= "@Html.NameFor(o=>o.oportunidad.Representante)" placeholder="Persona de contacto" aria-describedby="sizing-addon2" value="@Model.oportunidad.Representante" >
                                    </div>

                                    <div class="input-group miinput">

                                        <span class="input-group-addon" id="sizing-addon4">Telefono :</span>
                                        <input type="tel" class="form-control" name= "@Html.NameFor(o=>o.oportunidad.Telefono)" placeholder="Telefono" aria-describedby="sizing-addon2" value ="@Model.oportunidad.Telefono">
                                    </div>

                                    <div class="input-group miinput">
                                        <span class="input-group-addon" id="sizing-addon5">Correo: </span>
                                        <input type="email" class="form-control" name= "@Html.NameFor(o=>o.oportunidad.Correo)" placeholder="Correo" aria-describedby="sizing-addon2" value="@Model.oportunidad.Correo">
                                    </div>
                                    <div class="input-group miinput">
                                        <span class="input-group-addon" id="sizing-addon6">Medio: </span>

                                        <div class="col-xs-12 selectContainer">
                                            <select class="form-control" name="MedioContacto" >
                                                <option value="Null">Seleccione un tipo</option>
                                                <option value="Correo">Correo</option>
                                                <option value="Web">Portal de Internet</option>
                                                <option value="Telefono">Teléfono</option>
                                                <option value="Whatsapp">Whatsapp</option>
                                                <option value="Facebook">Facebook</option>
                                                <option value="Otros">Otros</option>

                                            </select>
                                        </div>
                                    </div>
                                   
                                    </div>
                            


                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h2 class="panel-title">Requerimiento de la oportunidad</h2>
                                    </div>
                                    <div class="panel-body ">
                                        <div class="form-horizontal">
                                            <div class="form-group">
                                                <div class="col-md-12">
                                                    <textarea class="form-control" name="DescripcionOportunidad" rows="4" placeholder="Describa la oportunidad" width=100% required></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">


                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h2 class="panel-title">Informacion</h2>
                                    </div>
                                    <div class="panel-body">
                                        <div class="col-md-6 selectContainer">

                                          
                                            <div class="input-group miinput">
                                   
                                                <ul class="list-group" id="list1">
                                                    <a class="list-group-item"><h4><span>Tipo de Oportunidad</span></h4></a>
                                                    @foreach (var g in Model.LOportunidad)
                                                    {
                                                        <li class="list-group-item ">
                                                            <input type="checkbox"

                                                                   name="SelectedGroups" value="@g.Id" id="@g.Id"

                                                                   @foreach (var intereses in Model.oportunidad.TbTipoOportunidad)
                                                                   {


                                                                       if (intereses.Id == g.Id)
                                                                       {

                                                                           <text> checked = 'checked' </text>

                                                                       }
                                                                   }/>



                                                            <label for="@g.Id">@g.Nombre</label>
                                                        </li>
                                                    }
                                                </ul>
                                            </div>

                                        </div>
                                        <div class="col-md-6 selectContainer">


                                            <div class="input-group miinput">

                                                <ul class="list-group" id="list1">
                                                    <a class="list-group-item"><h4><span>Areas de Interes</span></h4></a>
                                                    @foreach (var g in Model.LAreas)
                                                    {
                                                        <li class="list-group-item ">
                                                            <input type="checkbox"
                                                                   name="SelectedGroups" value="@g.Id" id="@g.Id"
                                                                   @foreach (var intereses in Model.oportunidad.TbAreaInteres) {   if (intereses.Id == g.Id) {  <text> checked='checked' </text>   } } />



                                                            <label for="@g.Id">@g.Nombre</label>
                                                        </li>
    }
                                                </ul>
                                            </div>



                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row" style="margin: 20px;">
                            <form>
                                <div class="form-group">

                                    <div class="col-md-6" style="align-content: center">
                                        <button type="submit" id="enviar" class="btn btn-primary">Nueva Oportunidad</button>
                                        <button type="submit" id="cancelar" class="btn btn-danger">Cancelar Oportunidad</button>
                                    </div>
                                </div>

                            </form>
                        </div>

                    </div>
                }
            </div>
        </div>
    </div>
</div>
 


@section Scripts{
<script>
    $('.add').click(function(){
        $('.all').prop("checked",false);
        var items = $("#list1 input:checked:not('.all')");
        var n = items.length;
        if (n > 0) {
            items.each(function(idx,item){
                var choice = $(item);
                choice.prop("checked",false);
                choice.parent().appendTo("#list2");
            });
        }
        else {
            alert("Choose an item from list 1");
        }
    });

    $('.remove').click(function(){
        $('.all').prop("checked",false);
        var items = $("#list2 input:checked:not('.all')");
        items.each(function(idx,item){
            var choice = $(item);
            choice.prop("checked",false);
            choice.parent().appendTo("#list1");
        });
    });

    /* toggle all checkboxes in group */
    $('.all').click(function(e){
        e.stopPropagation();
        var $this = $(this);
        if($this.is(":checked")) {
            $this.parents('.list-group').find("[type=checkbox]").prop("checked",true);
        }
        else {
            $this.parents('.list-group').find("[type=checkbox]").prop("checked",false);
            $this.prop("checked",false);
        }
    });

    $('[type=checkbox]').click(function(e){
        e.stopPropagation();
    });

    /* toggle checkbox when list group item is clicked */
    $('.list-group li').click(function(e){

        e.stopPropagation();

        var $this = $(this).find("[type=checkbox]");
        if($this.is(":checked")) {
            $this.prop("checked",false);
        }
        else {
            $this.prop("checked",true);
        }

        if ($this.hasClass("all")) {
            $this.trigger('click');
        }
    });

</script>  
}


@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()
    
    <div class="form-horizontal">
        <h4>TbOportunidad</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.oportunidad.Id, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.oportunidad.Id, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.oportunidad.Id, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.oportunidad.Folio, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.oportunidad.Folio, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.oportunidad.Folio, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.oportunidad.Fecha, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.oportunidad.Fecha, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.oportunidad.Fecha, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.oportunidad.FechaSistema, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.oportunidad.FechaSistema, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.oportunidad.FechaSistema, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.oportunidad.Representante, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.oportunidad.Representante, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.oportunidad.Representante, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.oportunidad.Telefono, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.oportunidad.Telefono, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.oportunidad.Telefono, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.oportunidad.Correo, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.oportunidad.Correo, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.oportunidad.Correo, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.oportunidad.MedioContacto, "MedioContacto", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
             @*   @Html.DropDownList("MedioContacto", null, htmlAttributes: new { @class = "form-control" })*@
                @Html.ValidationMessageFor(model => model.oportunidad.MedioContacto, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.oportunidad.Descripcion, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.oportunidad.Descripcion, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.oportunidad.Descripcion, "", new { @class = "text-danger" })
            </div>
        </div>

      

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </div>
    </div>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>
